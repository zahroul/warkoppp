<!DOCTYPE html>
<html lang="id">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Warkoppp - Warung Kopi Enak di Sekitarmu</title>
    </head>

    <body>
        <h1>Warkoppp</h1>

        <p>Warung Kopi Enak di Sekitarmu</p>

        <label>Cari Lokasi <input type="search" placeholder="Cari Lokasi ..."></label>

        <ul>
            <li hidden>
                <h2></h2>
                <div class="coffee-taste">Rasa Kopinya: <span></span></div>
                <div class="price">Harga: <span></span></div>
                <div class="location">Lokasi: <span></span></div>
            </li>
        </ul>

        <script>
            const app = {
                cafeCardsContainer: document.querySelector('ul'),
                cafeCardTemplate: document.querySelector('li'),

                getCafe: function() {
                    const request = new XMLHttpRequest();

                    request.onreadystatechange = function() {
                        if (request.readyState === XMLHttpRequest.DONE) {
                            if (request.status === 200) {
                                app.createCafeList(JSON.parse(request.response).cafeList);
                            }
                        }
                    };

                    request.open('GET', 'cafe-data.json');
                    request.send();
                },

                addCafeCard: function(cafe) {
                    const card = this.cafeCardTemplate.cloneNode(true);

                    card.querySelector('h2').textContent = cafe.name;
                    card.querySelector('.coffee-taste span').textContent = cafe.coffeTaste;
                    card.querySelector('.price span').textContent = cafe.price;
                    card.querySelector('.location span').textContent = cafe.location;
                    card.removeAttribute('hidden');

                    this.cafeCardsContainer.appendChild(card);
                },

                createCafeList: function(cafeList) {
                    cafeList.forEach(function(cafe) {
                        app.addCafeCard(cafe);
                    });
                }
            };

            app.getCafe();
        </script>
    </body>
</html>
